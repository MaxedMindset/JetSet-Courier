//
//  ContentView.swift
//  SkyCraftBuildAndFly
//
//  Erstellt von ChatGPT
//
//  Diese ContentView ist der zentrale Einstiegspunkt für das Spiel. Sie zeigt einen ansprechenden
//  Hauptmenübildschirm mit einem stylischen Hintergrund, einem weichen Blur/Gradient-Overlay und animierten Buttons,
//  die den Spieler zu den verschiedenen Modi führen: Build Your Plane, Start Flight und Career Mode.
//  Das Design orientiert sich an modernen Computerspielen und soll ein immersives Erlebnis bieten.
//

import SwiftUI
import SpriteKit

// Wrapper-View für den Hangar (Build Your Plane)
struct BuildYourPlaneViewContainer: UIViewRepresentable {
    func makeUIView(context: Context) -> SKView {
        let skView = SKView(frame: UIScreen.main.bounds)
        let scene = HangarScene(size: skView.bounds.size)
        scene.scaleMode = .aspectFill
        skView.presentScene(scene)
        return skView
    }
    func updateUIView(_ uiView: SKView, context: Context) {}
}

// Wrapper-View für den Flugmodus (Start Flight)
struct StartFlightViewContainer: UIViewRepresentable {
    func makeUIView(context: Context) -> SKView {
        let skView = SKView(frame: UIScreen.main.bounds)
        let scene = FlightScene(size: skView.bounds.size)
        scene.scaleMode = .aspectFill
        skView.presentScene(scene)
        return skView
    }
    func updateUIView(_ uiView: SKView, context: Context) {}
}

// Wrapper-View für den Karrieremodus (StoryScene)
struct StorySceneView: UIViewRepresentable {
    func makeUIView(context: Context) -> SKView {
        let skView = SKView(frame: UIScreen.main.bounds)
        let scene = StoryScene(size: skView.bounds.size)
        scene.scaleMode = .aspectFill
        skView.presentScene(scene)
        return skView
    }
    func updateUIView(_ uiView: SKView, context: Context) {}
}

struct ContentView: View {
    var body: some View {
        NavigationView {
            ZStack {
                // Hintergrundbild – Stelle sicher, dass "gameBackground" im Asset-Katalog existiert
                Image("gameBackground")
                    .resizable()
                    .aspectRatio(contentMode: .fill)
                    .edgesIgnoringSafeArea(.all)
                
                // Weicher Gradient-Overlay für einen dunklen, atmosphärischen Effekt
                LinearGradient(
                    gradient: Gradient(colors: [Color.black.opacity(0.3), Color.black.opacity(0.7)]),
                    startPoint: .top,
                    endPoint: .bottom
                )
                .edgesIgnoringSafeArea(.all)
                
                // Hauptmenü-Inhalt
                VStack(spacing: 30) {
                    Spacer()
                    
                    // Titel des Spiels
                    Text("SkyCraft: Build & Fly")
                        .font(.custom("AvenirNext-Bold", size: 48))
                        .foregroundColor(.white)
                        .shadow(color: .black, radius: 4, x: 2, y: 2)
                    
                    // Navigation zum "Build Your Plane" Modus
                    NavigationLink(destination: BuildYourPlaneViewContainer().edgesIgnoringSafeArea(.all)) {
                        Text("Build Your Plane")
                            .font(.custom("AvenirNext-Bold", size: 32))
                            .foregroundColor(.white)
                            .padding()
                            .frame(maxWidth: .infinity)
                            .background(RoundedRectangle(cornerRadius: 12).fill(Color.green))
                            .shadow(radius: 8)
                    }
                    .padding(.horizontal, 40)
                    
                    // Navigation zum "Start Flight" Modus
                    NavigationLink(destination: StartFlightViewContainer().edgesIgnoringSafeArea(.all)) {
                        Text("Start Flight")
                            .font(.custom("AvenirNext-Bold", size: 32))
                            .foregroundColor(.white)
                            .padding()
                            .frame(maxWidth: .infinity)
                            .background(RoundedRectangle(cornerRadius: 12).fill(Color.blue))
                            .shadow(radius: 8)
                    }
                    .padding(.horizontal, 40)
                    
                    // Navigation zum Karrieremodus (StoryScene)
                    NavigationLink(destination: StorySceneView().edgesIgnoringSafeArea(.all)) {
                        Text("Career Mode")
                            .font(.custom("AvenirNext-Bold", size: 32))
                            .foregroundColor(.white)
                            .padding()
                            .frame(maxWidth: .infinity)
                            .background(RoundedRectangle(cornerRadius: 12).fill(Color.purple))
                            .shadow(radius: 8)
                    }
                    .padding(.horizontal, 40)
                    
                    Spacer()
                    
                    // Fußzeile
                    Text("© 2025 SkyCraft Studios")
                        .font(.caption)
                        .foregroundColor(.white)
                        .padding(.bottom, 20)
                }
                .transition(.opacity)
            }
            .navigationBarHidden(true)
        }
    }
}

struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        ContentView()
    }
}
